<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Sabertooth</title>
    <link rel="icon" href="https://avatars3.githubusercontent.com/u/19232538?v=3&s=200">
    <link rel="shortcut icon" type="image/png" href="https://avatars3.githubusercontent.com/u/19232538?v=3&s=200"/>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/github-light.css">
    <meta name="viewport" content="width=device-width">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link href='https://fonts.googleapis.com/css?family=Raleway:400,100,200,300,500,600' rel='stylesheet' type='text/css'>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.3/jquery.min.js"></script>
  </head>

  <body>
    <div class="wrapper">
      <header>
        <h1>Sabertooth</h1>
        <h3>A Javascript Library for interacting with Bluetooth Low Energy Devices.</h3>
        <p></p>


        <p class="view">
          <a href="https://github.com/sabertooth-io">View on GitHub</a>
          <br>
          <a href="https://npmjs.com/package/web-bluetooth">View package on NPM</a>
          <br>
          View package on Bower (coming soon!)
        </p>
        <hr>
        <p>
          <a href="#intro">Intro</a>
          <br>
          <a href="#overview">Overview</a>
          <br>
          <a href="#getting-started">Getting Started</a>
        </p>
        <hr>
        <h4>Docs</h4>
        <p>
          <a href="#general-accessibility">General Accessibility</a>
          <br>
          <a href="#gatt-support">GATT Services Support</a>
        </p>
        <hr class="hr-methods">
        <p>
          <a href="#method-newdevice">Creating a new Bluetooth Device Object</a>
          <br>
          <a href="#method-connect">.connect()</a>
          <br>
          <a href="#method-disconnect">.disconnect()</a>
          <br>
          <a href="#method-getvalue">.getValue()</a>
        </p>
        <hr>
        <h4>Demo</h4>
        <p>
          <a href="#demo">Battery Service</a>
        </p>
        <hr>
        <h4>Appendix</h4>
        <p>
          <a href="#serviceschars">Fully Supported GATT Services &#38; GATT Characteristics</a>
        </p>
      </header>
      <section>
        <h3>
<a id="intro" class="anchor" href="#welcome-to-github-pages" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Bridging the gap between the web and the physical world through Bluetooth.</h3>
        <img class="intro-infographic" src="assets/BLE-WebInfographic.svg" height="80%" width="80%" horizontal-align="center">
        <p>Bluetooth devices are everywhere, and as developers, we want to write useful, fun, and powerful applications for them. Until recently, this meant writing native applications that had to be installed on user devices- a burdensome process for both users and developers. With the number of Bluetooth devices around us, a more direct and intuitive interface was long overdue. Now, thanks to the <a href="https://www.w3.org/community/web-bluetooth/">Web Bluetooth Community Group</a> and their work to bring us the <a href="https://webbluetoothcg.github.io/web-bluetooth/">Web Bluetooth API</a>, we have the ability to interact directly with Bluetooth 4.0 devices through the browser. Connecting, reading, and writing to and from Bluetooth devices is all made possible through the Web Bluetooth API and modern web browsers like Chrome, Firefox, and Opera who are incresingly adding support for new features in the Web Bluetooth API Spec.</p>
        <p>We at Sabertooth are excited by the potential for the Web Bluetooth API, but also recognize that developers like ourselves just want to build things, not spend time wading through documentation and hiking up the learning curve with every new technology we use. Sabertooth is an attempt to harness the power of the Web Bluetooth API and make it easily accessible to developers through a simple and intuitive framework. In short, we want you to start building powerful, browser-based Bluetooth applications quickly and effortlessly, and have fun doing it.</p>

        <h3>
<a id="overview" class="anchor" href="#designer-templates" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Overview</h3>

        <p>Sabertooth is a configurable application framework for integrating bluetooth functionality with client-side Javascript.</p>

        <h3>
<a id="getting-started" class="anchor" href="#creating-pages-manually" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Getting Started</h3>

        <p>Sabertooth (currently v1.0.0) has a few easy ways to quickly get started, each one appealing to your preferences.</p>
        <blockquote >Note: Sabertooth package names and file names appear as 'web-bluetooth' throughout the documentation, consistent with actual package names and file names you will encounter while working with Sabertooth.</blockquote>
        <br>
        <h4>Download</h4>
        <p>You can install Sabertooth by downloading our minified framework <a href="https://github.com/sabertooth-io/web-bluetooth/archive/master.zip" target="_blank">here</a>.</p>
        <p>Make the library available by referencing it in your index.html file.</p>
        <pre><code class="code">&#60;script&#62;/lib/web-bluetooth.js&#60;/script&#62;</code></pre>

        <h4>Install with npm</h4>
        <p>You can install Sabertooth as the npm package 'web-bluetooth' <a href="https://npmjs.com/package/web-bluetooth" target="_blank"> here</a>.</p>

        <p>Or run the command-line script below in the project directory in which you would like to use Sabertooth.</p>
        <pre><code class="code">$ npm install web-bluetooth</code></pre>
        <!--FIXME: We're not doing an iffy anymore, what is the right thing to show here?  -->
        <p style="color:red;">Require('web-bluetooth') will load all of the files necessary to run Sabertooth.</p>
        <pre><code style="color:red;" class="code">const bluetooth = require('web-bluetooth');</code></pre>
        <!-- <h4>Install with Bower</h4>
        <p>You can install web-bluetooth with <a href="http://bower.io/" target="_blank">Bower</a></p>
        <pre><code class="code">$ bower install web-bluetooth</code></pre> -->

        <h3 id="general-accessibility">
            <span aria-hidden="true" class="octicon octicon-link"></span>General Accesibility
        </h3>
        <p>While the Web Bluetooth API is still in development, certain features have been made available.
          </p>
          <div>
            <blockquote>
              Note: The functionality of Sabertooth is contingent upon the permissions and availabilities of the Web Bluetooth API. The Web Bluetooth API is still in development and many features have not been
              implemented across browsers. For the current status of the API, please follow this
              <a href="https://webbluetoothcg.github.io/web-bluetooth/" target="_blank">link</a>.
            </blockquote>
          </div>
        <table class="tables">
          <tr>
            <th id="feature-type">Feature</th>
            <th>ChromeOS</th>
            <th>Android Mobile</th>
            <th>MacOSX</th>
          </tr>
          <tr>
            <td id="feature-type">Device Discovery</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
          </tr>
          <tr>
            <td id="feature-type">Device Connecting</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
          </tr>
          <tr>
            <td id="feature-type">Device Disconnecting</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
          </tr>
          <tr>
            <td id="feature-type">Device Services Read</td>
            <td>✓</td>
            <td>✓</td>
            <td></td>
          </tr>
        </table>
        <blockquote >Note: To enable the browser to use the Web Bluetooth API (and Sabertooth), experimental flags must be enabled and an https server are required. Please see <a href="https://developers.google.com/web/updates/2015/07/interact-with-ble-devices-on-the-web">Interact with BLE Devices on the Web</a> for more information.
        </blockquote>
        <br>
        <h3><span aria-hidden="true" class="octicon octicon-link"></span>GATT Attributes</h3>
        <p>A basic understanding of the <a href="https://developer.bluetooth.org/TechnologyOverview/Pages/GATT.aspx">Generic Attribute Profile (GATT)</a> is helpful when writing applications to interact with Bluetooth devices, but using Sabertooth requires an understanding of two main GATT attributes, GATT services and GATT characteristics.</p>
        <p><b>GATT Services</b> are collections of GATT characteristics, and  <b>GATT Characteristics</b> are attributes that contain a single value. For example, the GATT service 'battery_service' contains the GATT characteristic 'battery_level', which itself contains the value of the device's battery level at a given time.</p>
          <img style="height: 250px" src="https://cdn-learn.adafruit.com/assets/assets/000/013/828/original/microcontrollers_GattStructure.png?1390836057" />
          <p>Sabertooth abstracts over core GATT services and GATT characteristics with special attention to GATT services and GATT characteristics that are more common and that are most applicable in the current stage of Bluetooth
          device availability, but also allows for the use of virtually any GATT service or GATT characteristic, as well as non-GATT services and non-GATT characteristics.</p>
          <p>For the full list of normative GATT services click <a href="https://developer.bluetooth.org/gatt/services/Pages/ServicesHome.aspx" target="_blank">here</a>. As the Web Bluetooth API continues to be
          developed and as this library matures, more service types will be made available.</p>

          <p>For the full list of GATT services and GATT characteristics currently fully supported by Sabertooth click <a href="#serviceschars" target="_blank">here</a>.</p>

        <h3 id="general-methods">
            <span aria-hidden="true" class="octicon octicon-link"></span>General Sabertooth Methods
        </h3>
        <h4 class="method-name" id="method-newdevice">
          Create a New Bluetooth Device Object
        </h4>
        <p>Before calling methods on your Bluetooth device, create a new Bluetooth device object.</p>
        <pre><code>var fitbit = new BluetoothDevice({
  name: 'Surge'
});</code></pre>
        <p>In the example above, we have created a new Bluetooth device object titled 'blue' by requesting the
          object with it's 'name'. The device 'name' is one of the many properties advertised by Bluetooth devices and serves as a possible identifier for establishing initial connections to the device. The device's <b>name</b>, <b>namePrefix</b>, <a href="https://en.wikipedia.org/wiki/Universally_unique_identifier">universally unique identifier</a> (<b>uuid</b>), or an advertised <b>service</b> are all valid options for requesting and establishing an initial device connection with Sabertooth.
          <p>'BluetoothDevice' is a constructor that takes in an object corresponding to attributes advertised by the bluetooth device. Below is a schema representing the optional parameters that can be passed into the BluetoothDevice constructor to create a new BluetoothDevice instance. At least one of the key-value pairs below is needed to request a device and establish an initial connection.</p>

          <pre><code>{
  name: 'device_name',
  namePrefix: 'devicePrefix',
  uuid: 'uuid',
  services: ['service', 'service', 'service']
}</code></pre>
          <code>'name': </code>the advertised the name of the device; often set by the manufacturer unless modified by the device user<br>
          <code>'namePrefix': </code>an initial substring of any length that matches an advertised device name<br>
          <code>'uuid': </code>represents a 128-bit uuid. A valid uuid is a string that matches
          the regexp <code>/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/</code><br>
          <code>'services': </code>collection of characteristics and the relationships to other services
          encapsulate the behavior of part of a device <br>
        </p>
        <p>
          Below are several examples of various ways in which a new BluetoothDevice instance can be created.
          <pre><code>/* Attempts to request a device advertising a name
 * beginning with the substring 'Su'
 */
var fitbit = new BluetoothDevice({
  namePrefix: 'Su'
});</code></pre>

<pre><code>/* Attempts to request a device advertising the name
 * 'Polar H7 Heart Rate Sensor' and ALSO advertising the
 * GATT service 'heart_rate'
 */
var fitbit = new BluetoothDevice({
name: 'Polar H7 Heart Rate Sensor'
service: ['heart_rate']
});</code></pre>

        </p>
        <hr>
        <h4 class="method-name" id="method-connect">
          .connect()
        </h4>
        <p>Method allows you to establish a persistent connection with a Bluetooth device.</p>
        <pre><code>fitbit.connect(connectedDevice,(server) => {
  connectedDevice = device;
};</code></pre>
        <hr>
        <h4 class="method-name" id="method-disconnect">
          .disconnect()
        </h4>
        <p>Method disconnects you from the device.</p>
        <pre><code>fitbit.disconnect();</code></pre>
        <hr>
        <h4 class="method-name" id="method-getvalue">
          <span  aria-hidden="true" class="octicon octicon-link"></span>.getValue('service')
        </h4>
        <p>Method reads the value from the device you are connected to by passing in the characteristic as a string.</p>
        <pre><code>fitbit
  .getValue('battery_service')
    .then(value => {
      console.log(value);
    });</code></pre>
        <p>In the above example, .getValue() returns the current battery level as a percentage from 0% to 100%;
          0% represents a battery that is fully discharged, 100% represents a battery that is fully charged.</p>
        <hr>
        <h4 class="method-name" id="method-postvalue">
          <span  aria-hidden="true" class="octicon octicon-link"></span>.postValue('service', 'value')
        </h4>
        <p>Method takes a characteristic name and value. It changes the value of the specified characteristic to the value that was passed in.</p>
        <pre><code>fitbit
  .postValue('gap.device_name', 'myFitbit )
    .then(changedCharacteristicName => {
      console.log(changedCharacteristicName);
    }); </code></pre>
        <p>In the above example, .postValue() changes the name of the instantiated device to myFitbit.</p>
        <h4 class="method-name" id="method-startnotifications">
          <span  aria-hidden="true" class="octicon octicon-link"></span>.startNotifications('characteristic', 'value')
        </h4>
        <p>Method takes a characteristic name and a callback function. Provided that the characteristic has a 'notify' property, .startNotifications() will pass the event object broadcasted by the characteristic as the parameter of the callback, and run the callback any time a new event occurs.</p>
        <pre><code>fitbit
  .startNotifications('heart_rate_measurement', e => {
    var newHR = parseHeartRate(e.target.value);
    console.log(newHR.heartRate);
}); </code></pre>
        <p>This method allows us to access streams of data. In the above example, .startNotifications() accesses the heart_rate_measurement characteristic on a fitbit, and prints the heart rate to the console every time an event fires. This 'notifies' us of the heart rate at regular intervals. </p>
         <h4 class="method-name" id="method-startnotifications">
          <span  aria-hidden="true" class="octicon octicon-link"></span>.stopNotifications('characteristic')
        </h4>
         <p>This method stops the notifications streaming from the specified characteristic on the device.</p>
         <pre><code>fitbit
  .stopNotifications('heart_rate_measurement'); </code></pre>
  <h4 class="method-name" id="method-startnotifications">
   <span  aria-hidden="true" class="octicon octicon-link"></span>.addCharacteristic('characteristic', 'service', properties)
 </h4>
  <p>This method adds Sabertooth support for the provided characteristic to device instance on which the method was called.</p>
  <p>
    <code>'characteristic': </code>a GATT characteristic or 128-bit uuid string that resolves to a characteristic accessible on the device instance<br>
    <code>'service': </code>a GATT service or 128-bit uuid string that resolves to a service accessible on the device instance<br>
    <code>properties: </code>an array containing at least one property existing on the characteristic to be added. Currently, Sabertooth supports the properties <b>'read'</b>, <b>'write'</b>, and <b>'notify'</b>.
  </p>
  <blockquote >Note: For characteristics added to the device instance, Sabertooth cannot parse values read from the device or prepare values to be written to the device. Returned values from device calls to the .readValue() method will return an object containing the raw data returned from the device; device calls to the .writeValue() method will attempt to write the provided value directly to the device in its provided form.
  </blockquote>
  <br>
  <pre><code>drone
.addCharacteristic('9a66fd22-0800-9191-11e4-012d1540cb8e','9a66fd21-0800-9191-11e4-012d1540cb8e',['read','write','notify']); </code></pre>
        <hr>
        <h3 id="demo">
          Demo
        </h3>
        <h4>Battery Service</h4>
        <a href="https://github.com/sabertooth-io/demo-battery_service" target="_blank"><img src="assets/battery_service.png" height="80%" width="80%" horizontal-align="center"></a>
        <p>This demo uses the Web-Bluetooth library to connect to a device broadcasting a Battery Service characteristic and reads it's level.</p>
        <p>
          <a href="https://demo-battery-service.herokuapp.com/" target="_blank">View the demo.</a> |
          <a href="https://github.com/sabertooth-io/demo-battery_service" target="_blank">Visit the GitHub page.</a>
        </p>
        <p>Notes: <br>
          • Requires Android 6.0 Marshmallow, ChromeOS, or Chrome for Linux.<br>
          • Enable the 'Web Bluetooth' flag.
          <hr>
          <h3>
            <span id="authors-contributors" aria-hidden="true" class="octicon octicon-link"></span>Authors and Contributors
          </h3>
          <p>Sabertooth is a team of four software developers enthusiastic to be contributing to the open source community. Visit their GitHub page for more information.</p>
      </section>
    </div>
    <script src="javascripts/scale.fix.js"></script>

  </body>

</html>
